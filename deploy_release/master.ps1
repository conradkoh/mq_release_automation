






################################################################################
# SCRIPT START
################################################################################


# Prepatch set up
echo "================================================================================"
echo "[Generating deployment date.                                                   ]"
echo "================================================================================"
.\generateDate.ps1
echo "Done!"
echo "================================================================================"
echo ""
echo ""
echo ""

echo "================================================================================"
echo "[Acquiring deployment versions.                                                ]"
echo "================================================================================"
.\grepDeploymentVersion.ps1
echo "Done!"
echo "================================================================================"
echo ""
echo ""
echo ""


# Prepatch verifications
echo "================================================================================"
echo "[    Determine which folders are being patched                                 ]"
echo "================================================================================"
.\determinePatchComponents.ps1
echo "Done!"
echo "================================================================================"
echo ""
echo ""
echo ""

echo "================================================================================"
echo "[    Pre patch version check.                                                  ]"
echo "================================================================================"
.\prePatchVersionCheck.ps1
echo "Done!"
echo "================================================================================"
echo ""
echo ""
echo ""

# Patching
echo "================================================================================"
echo "Generating backups."
echo "================================================================================"
.\backup.ps1
echo "Done!"
echo "================================================================================"
echo ""
echo ""
echo ""

echo "================================================================================"
echo "[    Deploying patches.                                                        ]"
echo "================================================================================"
.\patch.ps1
echo "Done!"
echo "================================================================================"
echo ""
echo ""
echo ""

# Postpatch verifications
echo "================================================================================"
echo "Post patch version check."
echo "================================================================================"
.\postPatchVersionCheck.ps1
echo "Done!"
echo "================================================================================"
echo ""
echo ""
echo ""

# Automated recovery
#echo "================================================================================"
#echo "Initiating automated recovery."
#echo "================================================================================"
#.\recovery.ps1
#echo "Done!"
#echo "================================================================================"
#echo ""
#echo ""
#echo ""